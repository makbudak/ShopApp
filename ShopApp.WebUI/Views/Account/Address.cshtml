
@{
    ViewData["Title"] = "Adreslerim";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-md-3">
        @await Html.PartialAsync("_ProfileMenu")
    </div>
    <div class="col-md-9">
        <el-card class="box-card">
            <template #header>
                <div class="row">
                    <div class="col-9">
                        <h5><i class="el-icon-message"></i> {{cardTitle}}</h5>
                    </div>
                    <div class="col-3">
                        <a v-if="showForm" class="btn btn-secondary btn-sm float-end" v-on:click="cancel()"><i class="el-icon-arrow-left"></i> Geri</a>
                        <a v-if="!showForm" v-on:click="addAddress()" class="btn btn-secondary btn-sm float-end"><i class="el-icon-plus"></i> Ekle</a>
                    </div>
                </div>
            </template>
            <div class="row" v-if="showEmpty">
                <div class="col-md-12">
                    <div class="alert alert-info mt-3" >
                        <div class="bold">Kayıt bulunamadı.</div>
                    </div>
                </div>
            </div>
            <div class="row" v-if="showGrid">
                <div class="col-md-6 mb-3" v-for="item in addresses" :key="item.id">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title pb-2 border-bottom"><i class="el-icon-message"></i> {{item.title}}</h5>
                            <div class="bold mt-2 mb-2 border-bottom py-2">{{item.nameSurname}}</div>
                            <div class="mt-1 mb-1 border-bottom py-2">{{item.phone}}</div>
                            <div class="card-text pb-3 border-bottom py-2" style="height: 100px;">{{item.address}}</div>
                            <div class="card-text border-bottom py-2" style="height:75px;">{{item.cityName}} / {{item.districtName}} / {{item.neighborhoodName}}</div>
                            <div class="mt-3">
                                <button class="btn btn-secondary btn-sm float-end" v-on:click="editAddress(item)"><i class="el-icon-edit-outline"></i></button>
                                <button class="btn btn-danger btn-sm float-end me-2" v-on:click="deleteAddress(item)"><i class="el-icon-delete"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" v-if="showForm">
                <div class="col-md-12">
                    <el-form ref="addressForm" :model="address" :rules="rules" label-position="top">
                        <el-row :gutter="20">
                            <el-col :span="12">
                                <el-form-item label="Adres Başlığı" ref="title">
                                    <el-input placeholder="Adres Başlığı" v-model="address.title"></el-input>
                                </el-form-item>

                                <el-form-item label="Adı Soyadı" ref="nameSurname">
                                    <el-input placeholder="Adı Soyadı" v-model="address.nameSurname"></el-input>
                                </el-form-item>

                                <el-form-item label="Posta Kodu" ref="postCode">
                                    <el-input placeholder="Posta Kodu" v-model="address.postCode"></el-input>
                                </el-form-item>

                                <el-form-item label="Telefon No" ref="phone">
                                    <el-input placeholder="Telefon No" v-model="address.phone"></el-input>
                                </el-form-item>
                            </el-col>
                            <el-col :span="12">
                                <el-form-item label="İl" ref="cityId">
                                    <el-select v-model="address.cityId" filterable placeholder="İl seçiniz" v-on:change="selectCity()" class="w-100">
                                        <el-option v-for="city in cities"
                                                   :key="city.id"
                                                   :label="city.name"
                                                   :value="city.id">
                                        </el-option>
                                    </el-select>
                                </el-form-item>

                                <el-form-item label="İlçe" ref="districtId">
                                    <el-select v-model="address.districtId" filterable placeholder="İlçe seçiniz" v-on:change="selectDistrict()" class="w-100">
                                        <el-option v-for="district in districts"
                                                   :key="district.id"
                                                   :label="district.name"
                                                   :value="district.id">
                                        </el-option>
                                    </el-select>
                                </el-form-item>

                                <el-form-item label="Mahalle/Köy" ref="neighborhoodId">
                                    <el-select v-model="address.neighborhoodId" filterable placeholder="Mahalle/Köy seçiniz" class="w-100">
                                        <el-option v-for="neighborhood in neighborhoods"
                                                   :key="neighborhood.id"
                                                   :label="neighborhood.name"
                                                   :value="neighborhood.id">
                                        </el-option>
                                    </el-select>
                                </el-form-item>

                                <el-form-item label="Adres" ref="address">
                                    <el-input type="textarea" :rows="4" placeholder="Adres" v-model="address.address"></el-input>
                                </el-form-item>
                            </el-col>
                        </el-row>
                        <el-form-item>
                            <el-button type="success" v-on:click="onSubmit('addressForm')" class="bg-success">Kaydet</el-button>
                        </el-form-item>
                    </el-form>
                </div>
            </div>
        </el-card>
    </div>
</div>

@section Scripts {
    <script src="~/js/pages/frontend/account/address.js"></script>
}
