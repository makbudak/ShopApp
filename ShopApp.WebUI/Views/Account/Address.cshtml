
@{
    ViewData["Title"] = "Adreslerim";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-md-3">
        @await Html.PartialAsync("_ProfileMenu")
    </div>
    <div class="col-md-9">
        <el-card class="box-card">
            <template #header>
                <div class="row">
                    <div class="col-9">
                        <h5><i class="el-icon-location"></i> {{cardTitle}}</h5>
                    </div>
                    <div class="col-3">
                        <a v-if="showForm" class="btn btn-secondary btn-sm float-end" v-on:click="cancel()"><i class="el-icon-arrow-left"></i> Geri</a>
                        <a v-if="!showForm" v-on:click="addAddress()" class="btn btn-secondary btn-sm float-end"><i class="el-icon-plus"></i> Ekle</a>
                    </div>
                </div>
            </template>
            <div class="row" v-if="showEmpty">
                <div class="col-md-12">
                    <div class="alert alert-info mt-3" >
                        <div class="bold">Kayıt bulunamadı.</div>
                    </div>
                </div>
            </div>
            <div class="row" v-if="showGrid">
                <div class="col-md-6 mb-3" v-for="item in addresses" :key="item.id">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="py-2"><i class="el-icon-add-location"></i> {{item.title}}</h5>
                        </div>
                        <div class="card-body">
                            <div class="row border-bottom py-3">
                                <div class="col-4 bold">Adı Soyadı </div>
                                <div class="col-8">{{item.nameSurname}}</div>
                            </div>
                            <div class="row border-bottom py-3">
                                <div class="col-4 bold">Telefon No </div>
                                <div class="col-8">{{item.phone}}</div>
                            </div>
                            <div class="row border-bottom py-3">
                                <div class="col-4 bold">Adres</div>
                                <div class="col-8">{{item.address}}</div>
                            </div>
                            <div class="row border-bottom py-3">
                                <div class="col-4 bold">İl / İlçe / Mahalle</div>
                                <div class="col-8">{{item.cityName}} / {{item.districtName}} / {{item.neighborhoodName}}</div>
                            </div>
                            <div class="row pt-3 pb-2">
                                <div class="col-12">
                                    <button class="btn btn-secondary btn-sm float-end" v-on:click="editAddress(item)"><i class="el-icon-edit-outline"></i></button>
                                    <button class="btn btn-danger btn-sm float-end me-2" v-on:click="deleteAddress(item)"><i class="el-icon-delete"></i></button>
                                </div>                                
                            </div>                            
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" v-if="showForm">
                <div class="col-md-12">
                    <el-form ref="addressForm" :model="addressData" :rules="rules" label-position="top">
                        <el-row :gutter="20">
                            <el-col :span="12">
                                <el-form-item label="Adres Başlığı" prop="title" class="bold">
                                    <el-input placeholder="Adres Başlığı" v-model="addressData.title"></el-input>
                                </el-form-item>

                                <el-form-item label="Adı Soyadı" prop="nameSurname" class="bold">
                                    <el-input placeholder="Adı Soyadı" v-model="addressData.nameSurname"></el-input>
                                </el-form-item>

                                <el-form-item label="Posta Kodu" class="bold">
                                    <el-input placeholder="Posta Kodu" v-model="addressData.postCode"></el-input>
                                </el-form-item>

                                <el-form-item label="Telefon No" prop="phone" class="bold">
                                    <el-input placeholder="Telefon No" v-model="addressData.phone"></el-input>
                                </el-form-item>
                            </el-col>
                            <el-col :span="12">
                                <el-form-item label="İl" prop="cityId" class="bold">
                                    <el-select v-model="addressData.cityId" filterable placeholder="İl seçiniz" v-on:change="selectCity()" class="w-100">
                                        <el-option v-for="city in cities"
                                                   :key="city.id"
                                                   :label="city.name"
                                                   :value="city.id">
                                        </el-option>
                                    </el-select>
                                </el-form-item>

                                <el-form-item label="İlçe" prop="districtId" class="bold">
                                    <el-select v-model="addressData.districtId" filterable placeholder="İlçe seçiniz" v-on:change="selectDistrict()" class="w-100">
                                        <el-option v-for="district in districts"
                                                   :key="district.id"
                                                   :label="district.name"
                                                   :value="district.id">
                                        </el-option>
                                    </el-select>
                                </el-form-item>

                                <el-form-item label="Mahalle/Köy" prop="neighborhoodId" class="bold">
                                    <el-select v-model="addressData.neighborhoodId" filterable placeholder="Mahalle/Köy seçiniz" class="w-100">
                                        <el-option v-for="neighborhood in neighborhoods"
                                                   :key="neighborhood.id"
                                                   :label="neighborhood.name"
                                                   :value="neighborhood.id">
                                        </el-option>
                                    </el-select>
                                </el-form-item>

                                <el-form-item label="Adres" prop="address" class="bold">
                                    <el-input type="textarea" :rows="4" placeholder="Adres" v-model="addressData.address"></el-input>
                                </el-form-item>
                            </el-col>
                            <el-col :span="24">
                                <el-form-item>
                                    <el-button type="success" v-on:click="onSubmit('addressForm')" class="bg-success">Kaydet</el-button>
                                </el-form-item>
                            </el-col>
                        </el-row>
                    </el-form>
                </div>
            </div>
        </el-card>
    </div>
</div>

@section Scripts {
    <script src="~/js/pages/frontend/account/address.js"></script>
}
